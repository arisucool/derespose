<div
  class="container"
  #container
  [ngClass]="{
    initializing: this.state === 'initializing',
    standby: this.state === 'standby',
    searching: this.state === 'searching',
    completed: this.state === 'completed'
  }"
>
  <!-- 検索パネル -->
  <div
    class="search-ctrl-container"
    [ngClass]="{
      'camera-search': this.searchMode && this.searchMode === 'camera',
      'tag-search': this.searchMode && this.searchMode === 'tag',
      'pose-set-search': this.searchMode && this.searchMode === 'poseSet',
      'pose-list-search': this.searchMode && this.searchMode === 'poseList'
    }"
  >
    <!-- カメラによる検索 -->
    <app-camera-search-ctrl
      *ngIf="this.searchMode && this.searchMode === 'camera'"
      #cameraSearchCtrl
      (onSearchTargetPoseDecided)="this.onSearchTargetPoseDecided($event)"
      (onRetryPhotoShootStarted)="this.onRetryPhotoShootStarted($event)"
    ></app-camera-search-ctrl>
    <!---->

    <!-- タグによる検索 -->
    <app-tag-search-ctrl
      *ngIf="this.searchMode && this.searchMode === 'tag'"
      [tagName]="this.searchTarget?.tag"
    ></app-tag-search-ctrl>
    <!---->

    <!-- ポーズリストによる検索 -->
    <app-pose-list-search-ctrl
      *ngIf="this.searchMode && this.searchMode === 'poseList'"
      [poseListId]="this.searchTarget?.poseListId"
    >
    </app-pose-list-search-ctrl>
    <!---->

    <!-- ポーズセット (ポーズファイル) による検索 -->
    <app-pose-set-search-ctrl
      *ngIf="this.searchMode && this.searchMode === 'poseSet'"
      [poseSet]="this.searchTarget?.poseSet"
    ></app-pose-set-search-ctrl>
    <!---->

    <!-- ローディングスピナー -->
    <div class="spinner-container" *ngIf="this.state === 'searching'">
      <ngx-spinner
        type="ball-fussion"
        [fullScreen]="false"
        color="#bedbfd"
        size="medium"
        bdColor="#fefefe88"
      >
      </ngx-spinner>
    </div>
    <!---->
  </div>
  <!---->

  <div class="matched-poses-container" [ngClass]="{ init: !searchTarget }">
    <ng-container *ngIf="searchTarget">
      <ng-container *ngIf="this.matchedPoses && 0 < this.matchedPoses.length">
        <!-- 検索結果の各ポーズ -->
        <app-matched-pose
          *ngFor="let pose of this.matchedPoses"
          [pose]="pose"
        ></app-matched-pose>
        <!---->

        <!-- 最終行のレイアウト崩れを防ぐための要素 (不可視) -->
        <app-matched-pose
          class="layout-adjustment-item"
          [pose]="this.matchedPoses[this.matchedPoses.length - 1]"
          *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]"
        >
          &nbsp;
        </app-matched-pose>
        <!---->
      </ng-container>
    </ng-container>
  </div>
</div>

<div class="bottom-navigation" *ngIf="this.state !== 'searching'">
  <a routerLink="/">
    <mat-icon>navigate_before</mat-icon> &nbsp; トップページへ</a
  >
</div>
